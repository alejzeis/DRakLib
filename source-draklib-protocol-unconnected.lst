       |ï»¿module draklib.protocol.unconnected;
       |import draklib.core : RakNetInfo;
       |import draklib.bytestream : ByteStream;
       |import draklib.protocol.packet;
       |
       |class UnconnectedPingPacket1 : Packet {
       |        long time;
       |
       |        override {
       |                protected void _encode(ByteStream stream) {
0000000|                        stream.writeLong(time);
0000000|                        stream.writeU(RakNetInfo.RAKNET_MAGIC);
       |                }
       |
       |                protected void _decode(ByteStream stream) {
0000000|                        time = stream.readLong();
       |                        // MAGIC
       |                }
       |
       |                ubyte getID() {
0000000|                        return RakNetInfo.UNCONNECTED_PING_1;
       |                }
       |
       |                uint getSize() {
0000000|                        return 25;
       |                }
       |        }
       |}
       |
       |class UnconnectedPingPacket2 : UnconnectedPingPacket1 {
       |        override {
       |                ubyte getID() {
0000000|                        return RakNetInfo.UNCONNECTED_PING_2;
       |                }
       |        }
       |}
       |
       |class UnconnectedPongPacket : Packet {
       |        long time;
       |        long serverGUID;
       |        string serverInfo;
       |        
       |        override {
       |                protected void _encode(ByteStream stream) {
0000000|                        stream.writeLong(time);
0000000|                        stream.writeLong(serverGUID);
0000000|                        stream.writeU(RakNetInfo.RAKNET_MAGIC);
0000000|                        stream.writeStrUTF8(serverInfo);
       |                }
       |                
       |                protected void _decode(ByteStream stream) {
0000000|                        time = stream.readLong();
0000000|                        serverGUID = stream.readLong();
0000000|                        stream.skip(RakNetInfo.RAKNET_MAGIC.length);
0000000|                        serverInfo = stream.readStrUTF8();
       |                }
       |
       |                ubyte getID() {
0000000|                        return RakNetInfo.UNCONNECTED_PONG;
       |                }
       |                
       |                uint getSize() {
0000000|                        return cast(uint) (35 + (cast(byte[]) serverInfo).length);
       |                }
       |        }
       |}
       |
       |class AdvertiseSystemPacket : UnconnectedPongPacket {
       |        override {
       |                ubyte getID() {
0000000|                        return RakNetInfo.ADVERTISE_SYSTEM;
       |                }
       |        }
       |}
source/draklib/protocol/unconnected.d is 0% covered
